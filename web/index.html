<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
    <title>PDF Booklet Creator</title>
    <script type="text/javascript" src="/eel.js"></script>
    <link rel="stylesheet" href="../assets/index.css">
    <!-- –í index.html –≤ —Ç–µ–≥–µ <head> -->
    <link rel="icon" type="image/png" href="icon.png">
</head>
<body>
    <div class="container">
        <div class="left-panel">
            <h1>üìò –°–æ–∑–¥–∞—Ç–µ–ª—å –±—É–∫–ª–µ—Ç–æ–≤ PDF</h1>
            <div class="form-group">
                <label for="input-file">–ò—Å—Ö–æ–¥–Ω—ã–π PDF —Ñ–∞–π–ª:</label>
                <div class="file-input">
                    <input type="text" id="input-file" placeholder="–í—ã–±–µ—Ä–∏—Ç–µ PDF —Ñ–∞–π–ª..." readonly>
                    <button class="browse-btn" onclick="openFileBrowser('input')">–û–±–∑–æ—Ä</button>
                </div>
            </div>
          <div class="form-group">
    <label for="output-file">–í—ã—Ö–æ–¥–Ω–æ–π —Ñ–∞–π–ª:</label>
        <div class="file-input">
                    <input type="text" id="output-file" placeholder="booklet_output.pdf">
                    <button class="browse-btn" onclick="openFileBrowser('output')">–û–±–∑–æ—Ä</button>
                    <button class="open-folder-btn" onclick="openOutputFolder()" title="–û—Ç–∫—Ä—ã—Ç—å –ø–∞–ø–∫—É">
                        üìÅ
                    </button>
                </div>
            </div>
            <div class="settings-container">
                <div class="settings-title">–ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–µ—á–∞—Ç–∏:</div>
                 <div class="setting-option">
                    <input type="checkbox" id="rotate-all" value="rotate-all">
                    <label for="rotate-all">–ü–æ–≤–æ—Ä–æ—Ç –≤—Å–µ–≥–æ –¥–æ–∫—É–º–µ–Ω—Ç–∞ (Rotate)</label>
                </div>
                <div class="setting-option">
                    <input type="checkbox" id="rotate" value="rotate">
                    <label for="rotate">–ü–æ–≤–æ—Ä–æ—Ç –ø–æ–ª–æ–≤–∏–Ω—ã –¥–æ–∫—É–º–µ–Ω—Ç–∞ (Rotate)</label>
                </div>
                <div class="setting-option">
                    <input type="checkbox" id="flip-horizontal" value="flip-horizontal">
                    <label for="flip-horizontal">–û—Ç—Ä–∞–∂–µ–Ω–∏–µ –ø–æ –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª–∏</label>
                </div>
                <div class="setting-option">
                    <input type="checkbox" id="flip-vertical" value="flip-vertical">
                    <label for="flip-vertical">–û—Ç—Ä–∞–∂–µ–Ω–∏–µ –ø–æ –≤–µ—Ä—Ç–∏–∫–∞–ª–∏</label>
                </div>
            </div>
            <button class="prepare-btn" id="prepare-btn" onclick="prepareBooklet()">
                üõ†Ô∏è –ü–û–î–ì–û–¢–û–í–ò–¢–¨ –ë–£–ö–õ–ï–¢
            </button>
            <div class="progress-container" id="progress-container">
                <div class="progress-bar">
                    <div class="progress-fill" id="progress-fill"></div>
                </div>
                <div class="progress-text" id="progress-text">–û–∂–∏–¥–∞–Ω–∏–µ...</div>
            </div>
            <div class="status" id="status"></div>



            <div class="info-text">
                <div class="info-title">–ö–∞–∫ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å:</div>
                <div class="steps-container">
                    <div class="step"><div class="step-icon">‚Üí</div><span class="step-text">–í—ã–±–µ—Ä–∏—Ç–µ PDF —Ñ–∞–π–ª –¥–ª—è –æ–±—Ä–∞–±–æ—Ç–∫–∏</span></div>
                    <div class="step"><div class="step-icon">‚Üí</div><span class="step-text">–£–∫–∞–∂–∏—Ç–µ –∏–º—è –≤—ã—Ö–æ–¥–Ω–æ–≥–æ —Ñ–∞–π–ª–∞</span></div>
                    <div class="step"><div class="step-icon">‚Üí</div><span class="step-text">–ù–∞–∂–º–∏—Ç–µ "–ü–û–î–ì–û–¢–û–í–ò–¢–¨ –ë–£–ö–õ–ï–¢"</span></div>
                    <div class="step"><div class="step-icon">‚Üí</div><span class="step-text">–ü—Ä–æ—Å–º–æ—Ç—Ä–∏—Ç–µ —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –≤ –≥–∞–ª–µ—Ä–µ–µ</span></div>
                    <div class="step"><div class="step-icon">‚Üí</div><span class="step-text">–†–∞—Å–ø–µ—á–∞—Ç–∞–π—Ç–µ —Å –¥–≤—É—Å—Ç–æ—Ä–æ–Ω–Ω–µ–π –ø–µ—á–∞—Ç—å—é</span></div>
                </div>
            </div>
        </div>
        <div class="right-panel">
    <div class="preview-container">
        <div class="pdf-viewer" id="pdf-viewer">
            <!-- –ì–∞–ª–µ—Ä–µ—è –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏–π -->
            <div class="gallery-container" id="gallery-container">
                    <div class="gallery-header">
                        <div class="gallery-title">–ü—Ä–µ–¥–ø—Ä–æ—Å–º–æ—Ç—Ä –±—É–∫–ª–µ—Ç–∞</div>
                        <div class="gallery-counter" id="gallery-counter">0/0</div>
                    </div>

                    <div class="gallery-content">
                        <button class="gallery-nav-btn" id="gallery-prev" onclick="previousPage()" disabled>
                            <i class="fas fa-chevron-left"></i>
                        </button>

                        <div class="gallery-track" id="gallery-track">
                            <div class="gallery-empty" id="no-preview">
                                <div class="welcome-icon">
                                    <i class="fas fa-file-pdf"></i>
                                </div>
                                <h3>–°–æ–∑–¥–∞–π—Ç–µ –≤–∞—à –±—É–∫–ª–µ—Ç</h3>
                                <p>–í—ã–±–µ—Ä–∏—Ç–µ PDF —Ñ–∞–π–ª –∏ –Ω–∞–∂–º–∏—Ç–µ "–ü–û–î–ì–û–¢–û–í–ò–¢–¨"<br>–¥–ª—è –≥–µ–Ω–µ—Ä–∞—Ü–∏–∏ –ø—Ä–µ–≤—å—é –±—É–∫–ª–µ—Ç–∞</p>
                            </div>
                        </div>

                        <button class="gallery-nav-btn" id="gallery-next" onclick="nextPage()" disabled>
                            <i class="fas fa-chevron-right"></i>
                        </button>
                    </div>
                </div>

                <!-- –°—Ç–∞—Ä—ã–π iframe (–æ—Å—Ç–∞–≤–ª—è–µ–º —Å–∫—Ä—ã—Ç—ã–º) -->
                <iframe id="pdf-frame" class="pdf-frame" style="display: none;"></iframe>
            </div>
        </div>
    </div>
    </div>
    <!-- –ú–æ–¥–∞–ª—å–Ω–æ–µ –æ–∫–Ω–æ —Ñ–∞–π–ª–æ–≤–æ–≥–æ –±—Ä–∞—É–∑–µ—Ä–∞ -->
    <div class="modal-overlay" id="file-browser-modal">
        <div class="modal-content">
            <div class="modal-header">
                <div class="modal-title" id="modal-title">–í—ã–±–æ—Ä —Ñ–∞–π–ª–∞</div>
                <button class="close-btn" onclick="closeFileBrowser()">√ó</button>
            </div>
            <div class="path-display" id="current-path">/</div>
            <div class="search-container">
                <input type="text" class="search-input" id="search-input" placeholder="–ü–æ–∏—Å–∫..." oninput="loadDirectoryWithFilters()">
                <input type="checkbox" class="filter-checkbox" id="pdf-only" onchange="loadDirectoryWithFilters()">
                <label for="pdf-only">–¢–æ–ª—å–∫–æ PDF</label>
            </div>
            <div class="file-list" id="file-list"></div>
            <div class="output-name-container" id="output-name-container">
                <input type="text" class="output-name-input" id="output-name" placeholder="–í–≤–µ–¥–∏—Ç–µ –∏–º—è —Ñ–∞–π–ª–∞ (–Ω–∞–ø—Ä–∏–º–µ—Ä, output.pdf)">
                <button class="select-btn" onclick="confirmOutputSelection()">–í—ã–±—Ä–∞—Ç—å</button>
            </div>
            <div class="modal-footer">
                <button class="back-btn" onclick="goBack()">–ù–∞–∑–∞–¥</button>
            </div>
        </div>
    </div>
    <script src="assets/index.js" defer></script>
</body>
</html>